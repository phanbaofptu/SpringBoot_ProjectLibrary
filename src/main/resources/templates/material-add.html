<th:block th:include="include/header"></th:block>
<th:block th:include="include/navbar"></th:block>
<div class="container">
    <div class="row">
        <div class="col-6 mx-auto">
            <h1>Add New Material</h1>
            <div th:if="${param.success}">
                <div class="alert alert-primary">
                    Add New Material Successfully !!!
                </div>
            </div>
            <div th:if="${message}">
                <div class="alert alert-primary" th:text="${message}">

                </div>

            </div>
            <form method="POST" enctype="multipart/form-data" th:action="@{/teacher/material-upload-file}">
                <div class="alert alert-primary">
                    Please upload the first file to grant permission to create materials
                </div>
                <div class="input-group mb-3">
                    <label class="input-group-text" for="inputGroupFile01">Upload File</label>
                    <input type="file" class="form-control" name="file" id="inputGroupFile01" required>
                </div>
                <button class="btn btn-primary mb-3" type="submit">Upload File</button>
            </form>
            <form
                    method="post"
                    role="form"
                    th:action="@{/teacher/material-add}"
                    th:object="${material}"
                    enctype="multipart/form-data"
            >


                <div class="mb-3">
                    <label class="form-label" for="name">Name</label>
                    <input class="form-control" id="name" th:field="*{name}" type="text" required>
                    <p class="text-danger" th:errors="*{name}"
                       th:if="${#fields.hasErrors('name')}"></p>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="description">Description</label>
                    <input class="form-control" id="description" th:field="*{description}" type="text">
                    <p class="text-danger" th:errors="*{description}"
                       th:if="${#fields.hasErrors('description')}"></p>
                </div>
                <div class="mb-3" hidden="hidden">
                    <label class="form-label" for="fileName">File Name</label>
                    <input class="form-control" id="fileName" th:field="*{fileName}" type="text" readonly required>
                    <p class="text-danger" th:errors="*{fileName}"
                       th:if="${#fields.hasErrors('fileName')}"></p>
                </div>

                <div class="mb-3" hidden="hidden">
                    <label class="form-label" for="fileUrl">File Url</label>
                    <input class="form-control" id="fileUrl" th:field="*{fileUrl}" type="text" readonly required>
                    <p class="text-danger" th:errors="*{fileUrl}"
                       th:if="${#fields.hasErrors('fileUrl')}"></p>
                </div>

                <div class="mb-3" hidden="">
                    <label class="form-label" for="postBy">Post By</label>
                    <input class="form-control" id="postBy" th:field="*{postBy}"  type="text" readonly required>
                    <p class="text-danger" th:errors="*{postBy}"
                       th:if="${#fields.hasErrors('postBy')}"></p>
                </div>
                <div class="mb-3" th:if="${message}">
                    <a type="button" class="btn btn-warning btn-sm" th:href="${material.fileUrl}"
                       th:text="${material.fileName}"></a>
                </div>



                <div class="mb-3" th:if="${message}">
                    <button class="btn btn-primary mb-3" type="submit">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</body>
</html>